<!DOCTYPE html>
<html>
<head>
  <title>Stockfish Input ‚Üí Output Console App</title>
</head>
<body>
  <h2>Stockfish Input/Output Test</h2>
  <p>Open the browser console to see Stockfish's response</p>

  <script>
    // Step 1: Load Stockfish as a web worker
    let stockfish;
    
    try {
      // Try local Stockfish first
      stockfish = new Worker('./stockfish.js');
      console.log('üì¶ Loading local Stockfish...');
    } catch (error) {
      // Fallback to CDN
      console.log('üåê Loading Stockfish from CDN...');
      stockfish = new Worker('https://cdn.jsdelivr.net/npm/stockfish@11/stockfish.js');
    }

    // Step 2: Setup message listener to read output
    stockfish.onmessage = function (e) {
      console.log("üß† Stockfish says:", e.data);
    };

    // Step 3: Start communication with Stockfish
    stockfish.postMessage("uci"); // initialize engine
    stockfish.postMessage("isready"); // check readiness
    stockfish.postMessage("ucinewgame"); // start fresh game

    // Step 4: Send board position (FEN) to Stockfish
    // Example: After 1. e4 e5, white to move
    const fen = "rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6 0 2";
    stockfish.postMessage("position fen " + fen);

    // Step 5: Ask for best move
    stockfish.postMessage("go depth 10"); // ask engine to calculate
  </script>
</body>
</html>
