<!DOCTYPE html>
<html>
<head>
  <title>Simple Stockfish Test</title>
</head>
<body>
  <h2>Simple Stockfish Test</h2>
  <button onclick="testStockfish()">Test Direct Stockfish</button>
  <button onclick="testWorker()">Test Worker</button>
  <button onclick="testMove()">Test Move Request</button>
  <div id="output" style="background: #000; color: #0f0; padding: 10px; margin: 10px 0; height: 300px; overflow-y: auto; font-family: monospace;"></div>

  <script>
    let stockfish;
    let worker;
    const output = document.getElementById('output');
    
    function log(message) {
      output.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
      output.scrollTop = output.scrollHeight;
      console.log(message);
    }
    
    function testStockfish() {
      log('üöÄ Testing direct Stockfish...');
      try {
        stockfish = new Worker('https://cdn.jsdelivr.net/npm/stockfish@10/stockfish.js');
        
        stockfish.onmessage = function(e) {
          log('üì® Direct: ' + e.data);
        };
        
        stockfish.onerror = function(error) {
          log('‚ùå Direct error: ' + error.message);
        };
        
        stockfish.postMessage('uci');
        stockfish.postMessage('isready');
        
      } catch (error) {
        log('‚ùå Failed to create direct Stockfish: ' + error.message);
      }
    }
    
    function testWorker() {
      log('üöÄ Testing worker...');
      try {
        worker = new Worker('./test-stockfish-worker.js');
        
        worker.onmessage = function(e) {
          log('üì® Worker: ' + JSON.stringify(e.data));
        };
        
        worker.onerror = function(error) {
          log('‚ùå Worker error: ' + error.message);
        };
        
        worker.postMessage('init');
        
      } catch (error) {
        log('‚ùå Failed to create worker: ' + error.message);
      }
    }
    
    function testMove() {
      log('üöÄ Testing move request...');
      if (stockfish) {
        stockfish.postMessage('position fen rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1');
        stockfish.postMessage('go depth 5');
      } else if (worker) {
        worker.postMessage({
          type: 'move',
          fen: 'rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1'
        });
      } else {
        log('‚ùå No Stockfish instance available');
      }
    }
  </script>
</body>
</html>
