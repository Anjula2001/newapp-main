<!DOCTYPE html>
<html>
<head>
  <title>Direct Stockfish Test</title>
</head>
<body>
  <h2>Direct Stockfish Worker Test</h2>
  <button onclick="testStockfish()">Test Stockfish</button>
  <button onclick="testMove()">Test Move</button>
  <div id="output"></div>

  <script>
    let worker;
    const output = document.getElementById('output');
    
    function log(message) {
      output.innerHTML += '<div style="margin: 5px 0; font-family: monospace;">' + 
                         new Date().toLocaleTimeString() + ': ' + message + '</div>';
      console.log(message);
    }
    
    function testStockfish() {
      log('üöÄ Creating worker...');
      
      try {
        worker = new Worker('./simple-stockfish-worker.js');
        
        worker.onmessage = function(e) {
          const { type, data } = e.data;
          log(`üì® Received ${type}: ${data}`);
        };
        
        worker.onerror = function(error) {
          log('‚ùå Worker error: ' + error.message);
        };
        
        log('üì§ Sending init...');
        worker.postMessage('init');
        
      } catch (error) {
        log('‚ùå Failed to create worker: ' + error.message);
      }
    }
    
    function testMove() {
      if (!worker) {
        log('‚ö†Ô∏è Worker not initialized');
        return;
      }
      
      log('üì§ Requesting move...');
      worker.postMessage({
        type: 'position',
        fen: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1',
        depth: 5
      });
    }
  </script>
</body>
</html>
